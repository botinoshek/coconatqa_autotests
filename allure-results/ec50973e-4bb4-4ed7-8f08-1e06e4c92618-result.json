{"name": "Тест регистрации пользователя с помощью Mock", "status": "broken", "statusDetails": {"message": "AttributeError: 'RegisterUserResponse' object has no attribute 'role'. Did you mean: 'roles'?", "trace": "self = <test_user.TestAuthAPI object at 0x107b5a450>, api_manager = <Modul_4.Cinescope.api.api_manager.ApiManager object at 0x107b9c440>\ntest_user = TestUser(email='kek58u4f1q0@gmail.com', fullName='Elizabeth Butler', password='$P8vZ?T%9P#uYQ|7e#*2', passwordRepeat='$P8vZ?T%9P#uYQ|7e#*2', roles=[<Roles.USER: 'USER'>], verified=None, banned=None)\nmocker = <pytest_mock.plugin.MockerFixture object at 0x107b9cad0>\n\n    @allure.title(\"Тест регистрации пользователя с помощью Mock\")\n    @allure.severity(allure.severity_level.MINOR)\n    @allure.label(\"qa_name\", \"Ivan Petrovich\")\n    def test_register_user_mock(self, api_manager: ApiManager, test_user: TestUser, mocker):\n        with allure.step(\"Мокаем метод register_user в auth_api\"):\n            mock_response = RegisterUserResponse(\n                id=\"id\",\n                email=\"email@email.com\",\n                fullName=\"fullName\",\n                verified=True,\n                banned=False,\n                roles=[Roles.SUPER_ADMIN],\n                createdAt=str(datetime.datetime.now())\n            )\n            mocker.patch.object(api_manager.auth_api, 'register_user', return_value=mock_response)\n    \n        with allure.step(\"Вызываем метод, который должен быть замокан\"):\n            register_user_response = api_manager.auth_api.register_user(test_user)\n    \n        with allure.step(\"Проверяем, что ответ соответствует ожидаемому\"):\n            check.equal(register_user_response.email, mock_response.email, \"Email не совпадает\")\n            check.equal(register_user_response.fullName, mock_response.fullName, \"Имя не совпадает\")\n            check.is_true(register_user_response.verified, \"Пользователь должен быть верифицирован\")\n>           check.equal(register_user_response.roles, mock_response.role, \"Роли не совпадают\")\n                                                      ^^^^^^^^^^^^^^^^^^\n\ntests/api/test_user.py:82: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = RegisterUserResponse(id='id', email='email@email.com', fullName='fullName', verified=True, banned=False, roles=[<Roles.SUPER_ADMIN: 'SUPER_ADMIN'>], createdAt='2025-10-23 21:19:17.663744'), item = 'role'\n\n    def __getattr__(self, item: str) -> Any:\n        private_attributes = object.__getattribute__(self, '__private_attributes__')\n        if item in private_attributes:\n            attribute = private_attributes[item]\n            if hasattr(attribute, '__get__'):\n                return attribute.__get__(self, type(self))  # type: ignore\n    \n            try:\n                # Note: self.__pydantic_private__ cannot be None if self.__private_attributes__ has items\n                return self.__pydantic_private__[item]  # type: ignore\n            except KeyError as exc:\n                raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}') from exc\n        else:\n            # `__pydantic_extra__` can fail to be set if the model is not yet fully initialized.\n            # See `BaseModel.__repr_args__` for more details\n            try:\n                pydantic_extra = object.__getattribute__(self, '__pydantic_extra__')\n            except AttributeError:\n                pydantic_extra = None\n    \n            if pydantic_extra and item in pydantic_extra:\n                return pydantic_extra[item]\n            else:\n                if hasattr(self.__class__, item):\n                    return super().__getattribute__(item)  # Raises AttributeError if appropriate\n                else:\n                    # this is the current error\n>                   raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\nE                   AttributeError: 'RegisterUserResponse' object has no attribute 'role'. Did you mean: 'roles'?\n\nvenv/lib/python3.13/site-packages/pydantic/main.py:1026: AttributeError"}, "steps": [{"name": "Мокаем метод register_user в auth_api", "status": "passed", "start": 1761243557664, "stop": 1761243557664}, {"name": "Вызываем метод, который должен быть замокан", "status": "passed", "start": 1761243557664, "stop": 1761243557664}, {"name": "Проверяем, что ответ соответствует ожидаемому", "status": "broken", "statusDetails": {"message": "AttributeError: 'RegisterUserResponse' object has no attribute 'role'. Did you mean: 'roles'?\n", "trace": "  File \"/Users/artem/AquaProjects/cinescope/tests/api/test_user.py\", line 82, in test_register_user_mock\n    check.equal(register_user_response.roles, mock_response.role, \"Роли не совпадают\")\n                                              ^^^^^^^^^^^^^^^^^^\n  File \"/Users/artem/AquaProjects/cinescope/venv/lib/python3.13/site-packages/pydantic/main.py\", line 1026, in __getattr__\n    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')\n"}, "start": 1761243557664, "stop": 1761243557664}], "start": 1761243557664, "stop": 1761243557665, "uuid": "04db3240-f019-46ce-b730-803997be9928", "historyId": "738d79e86c0c3b7d1ddbdacc2748a55d", "testCaseId": "738d79e86c0c3b7d1ddbdacc2748a55d", "fullName": "tests.api.test_user.TestAuthAPI#test_register_user_mock", "labels": [{"name": "severity", "value": "minor"}, {"name": "qa_name", "value": "Ivan Petrovich"}, {"name": "parentSuite", "value": "tests.api"}, {"name": "suite", "value": "test_user"}, {"name": "subSuite", "value": "TestAuthAPI"}, {"name": "host", "value": "MacBook-Air-von-Artem.local"}, {"name": "thread", "value": "20906-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.api.test_user"}], "titlePath": ["tests", "api", "test_user.py", "TestAuthAPI"]}